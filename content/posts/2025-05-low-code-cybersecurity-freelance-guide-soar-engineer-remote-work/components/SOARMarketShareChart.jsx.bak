import React from 'react';
import {
  Chart as ChartJS,
  ArcElement,
  Tooltip,
  Legend,
  Title
} from 'chart.js';
import { Doughnut } from 'react-chartjs-2';

ChartJS.register(ArcElement, Tooltip, Legend, Title);

const SOARMarketShareChart = () => {
  const options = {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: {
        position: 'right',
        labels: {
          usePointStyle: true,
          padding: 15,
          font: {
            size: 12,
            family: 'Inter, sans-serif'
          },
          generateLabels: function(chart) {
            const data = chart.data;
            if (data.labels.length && data.datasets.length) {
              return data.labels.map((label, i) => {
                const value = data.datasets[0].data[i];
                return {
                  text: `${label} (${value}%)`,
                  fillStyle: data.datasets[0].backgroundColor[i],
                  strokeStyle: data.datasets[0].borderColor[i],
                  lineWidth: data.datasets[0].borderWidth,
                  pointStyle: 'circle'
                };
              });
            }
            return [];
          }
        }
      },
      title: {
        display: true,
        text: '2025å¹´SOARå¹³å°å¸‚å ´ä»½é¡èˆ‡å·¥ä½œæ©Ÿæœƒåˆ†å¸ƒ',
        font: {
          size: 16,
          weight: 'bold',
          family: 'Inter, sans-serif'
        },
        padding: 20
      },
      tooltip: {
        backgroundColor: 'rgba(0, 0, 0, 0.8)',
        titleColor: '#fff',
        bodyColor: '#fff',
        borderColor: '#6366F1',
        borderWidth: 1,
        callbacks: {
          label: function(context) {
            const label = context.label || '';
            const value = context.parsed || 0;
            const total = context.dataset.data.reduce((a, b) => a + b, 0);
            const percentage = ((value / total) * 100).toFixed(1);
            return `${label}: ${percentage}% (${value}% å¸‚å ç‡)`;
          },
          afterLabel: function(context) {
            const jobOpportunities = {
              'Splunk SOAR': 'ç´„1,200å€‹æ´»èºè·ç¼º',
              'Cortex XSOAR': 'ç´„800å€‹æ´»èºè·ç¼º', 
              'IBM QRadar SOAR': 'ç´„400å€‹æ´»èºè·ç¼º',
              'Swimlane': 'ç´„300å€‹æ´»èºè·ç¼º',
              'Torq': 'ç´„250å€‹æ´»èºè·ç¼º',
              'Tines': 'ç´„200å€‹æ´»èºè·ç¼º',
              'å…¶ä»–å¹³å°': 'ç´„150å€‹æ´»èºè·ç¼º'
            };
            return jobOpportunities[context.label] || '';
          }
        }
      }
    },
    cutout: '45%',
    rotation: -90,
    circumference: 360,
    animation: {
      animateRotate: true,
      animateScale: true
    }
  };

  const data = {
    labels: [
      'Splunk SOAR',
      'Cortex XSOAR', 
      'IBM QRadar SOAR',
      'Swimlane',
      'Torq',
      'Tines',
      'å…¶ä»–å¹³å°'
    ],
    datasets: [
      {
        data: [32, 28, 15, 10, 8, 5, 2],
        backgroundColor: [
          '#3B82F6', // Splunk - è—è‰²
          '#EF4444', // Cortex XSOAR - ç´…è‰²
          '#10B981', // IBM QRadar - ç¶ è‰²
          '#F59E0B', // Swimlane - æ©™è‰²
          '#8B5CF6', // Torq - ç´«è‰²
          '#EC4899', // Tines - ç²‰è‰²
          '#6B7280'  // å…¶ä»– - ç°è‰²
        ],
        borderColor: [
          '#2563EB',
          '#DC2626', 
          '#059669',
          '#D97706',
          '#7C3AED',
          '#DB2777',
          '#4B5563'
        ],
        borderWidth: 2,
        hoverBorderWidth: 3,
        hoverOffset: 8
      }
    ]
  };

  const platformDetails = [
    {
      platform: 'Splunk SOAR',
      marketShare: '32%',
      avgSalary: '$74-105/hr',
      difficulty: 'ä¸­ç­‰',
      advantages: 'å¸‚å ´é ˜å°è€…ï¼Œå·¥ä½œæ©Ÿæœƒæœ€å¤š',
      learning: 'å®˜æ–¹èªè­‰é«”ç³»å®Œæ•´',
      trend: 'ğŸ“ˆ æŒçºŒå¢é•·',
      color: 'bg-blue-100 text-blue-800'
    },
    {
      platform: 'Cortex XSOAR', 
      marketShare: '28%',
      avgSalary: '$53-84/hr',
      difficulty: 'ä¸­é«˜',
      advantages: 'Palo Altoç”Ÿæ…‹ç³»çµ±æ•´åˆ',
      learning: 'PCSAEèªè­‰å«é‡‘é‡é«˜',
      trend: 'ğŸš€ å¿«é€Ÿå¢é•·',
      color: 'bg-red-100 text-red-800'
    },
    {
      platform: 'IBM QRadar SOAR',
      marketShare: '15%',
      avgSalary: '$65-95/hr', 
      difficulty: 'é«˜',
      advantages: 'ä¼æ¥­ç´šå®¢æˆ¶ç©©å®š',
      learning: 'éœ€è¦IBMç”Ÿæ…‹çŸ¥è­˜',
      trend: 'ğŸ“Š ç©©å®š',
      color: 'bg-green-100 text-green-800'
    },
    {
      platform: 'Swimlane',
      marketShare: '10%',
      avgSalary: '$70-120/hr',
      difficulty: 'ä¸­ç­‰',
      advantages: 'AIå¢å¼·è‡ªå‹•åŒ–ç‰¹è‰²',
      learning: 'ç›¸å°å®¹æ˜“ä¸Šæ‰‹',
      trend: 'â­ æ–°èˆˆç†±é–€',
      color: 'bg-yellow-100 text-yellow-800'
    }
  ];

  return (
    <div className="w-full bg-white p-6 rounded-lg shadow-lg border border-gray-200 my-8">
      <div className="h-96 mb-6">
        <Doughnut options={options} data={data} />
      </div>
      
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
        <div>
          <h4 className="font-semibold text-gray-800 mb-4">ğŸ† ä¸»è¦å¹³å°è©³ç´°åˆ†æ</h4>
          <div className="space-y-3">
            {platformDetails.map((platform, index) => (
              <div key={index} className="border rounded-lg p-3">
                <div className="flex justify-between items-center mb-2">
                  <span className="font-medium text-sm">{platform.platform}</span>
                  <span className={`px-2 py-1 rounded text-xs font-medium ${platform.color}`}>
                    {platform.trend}
                  </span>
                </div>
                <div className="grid grid-cols-2 gap-2 text-xs text-gray-600">
                  <div>å¸‚å ç‡: {platform.marketShare}</div>
                  <div>è–ªè³‡: {platform.avgSalary}</div>
                  <div>é›£åº¦: {platform.difficulty}</div>
                  <div className="col-span-2 mt-1">{platform.advantages}</div>
                </div>
              </div>
            ))}
          </div>
        </div>
        
        <div className="space-y-4">
          <div className="bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg">
            <h4 className="font-semibold text-gray-800 mb-3">ğŸ¯ å­¸ç¿’ç­–ç•¥å»ºè­°</h4>
            <div className="text-sm text-gray-700 space-y-2">
              <div><strong>æ–°æ‰‹é¦–é¸ï¼š</strong>Splunk SOAR (å¸‚å ´ä»½é¡å¤§ï¼Œå·¥ä½œæ©Ÿæœƒå¤š)</div>
              <div><strong>é«˜è–ªç›®æ¨™ï¼š</strong>Cortex XSOAR (Palo Altoç”Ÿæ…‹ï¼Œè–ªè³‡å¢é•·å¿«)</div>
              <div><strong>ä¼æ¥­å¸‚å ´ï¼š</strong>IBM QRadar SOAR (ç©©å®šå®¢æˆ¶ç¾¤)</div>
              <div><strong>å‰µæ–°å°å‘ï¼š</strong>Swimlane/Torq (æ–°èˆˆæŠ€è¡“ï¼Œå·®ç•°åŒ–å„ªå‹¢)</div>
            </div>
          </div>
          
          <div className="bg-gradient-to-r from-green-50 to-teal-50 p-4 rounded-lg">
            <h4 className="font-semibold text-gray-800 mb-3">ğŸ“Š å¸‚å ´è¶¨å‹¢æ´å¯Ÿ</h4>
            <div className="text-sm text-gray-700 space-y-2">
              <div>â€¢ <strong>ç¸½å¸‚å ´è¦æ¨¡ï¼š</strong>2025å¹´é”åˆ°32å„„ç¾å…ƒ</div>
              <div>â€¢ <strong>å¹´å¢é•·ç‡ï¼š</strong>25-30% (é è¶…å‚³çµ±è³‡å®‰å·¥å…·)</div>
              <div>â€¢ <strong>äººæ‰ç¼ºå£ï¼š</strong>å…¨çƒçŸ­ç¼º5.2è¬SOARå°ˆå®¶</div>
              <div>â€¢ <strong>è–ªè³‡è¶¨å‹¢ï¼š</strong>å¹´å¢é•·15-20%</div>
            </div>
          </div>
          
          <div className="bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg">
            <h4 className="font-semibold text-gray-800 mb-3">ğŸš€ è¡Œå‹•å»ºè­°</h4>
            <div className="text-sm text-gray-700 space-y-2">
              <div><strong>1. é›™å¹³å°ç­–ç•¥ï¼š</strong>ä¸»æ”»ä¸€å€‹ï¼Œç†Ÿæ‚‰å¦ä¸€å€‹</div>
              <div><strong>2. èªè­‰å„ªå…ˆï¼š</strong>æŠ•è³‡å®˜æ–¹èªè­‰ï¼ŒæŠ•è³‡å›å ±ç‡300%+</div>
              <div><strong>3. å¯¦æˆ°ç¶“é©—ï¼š</strong>åƒèˆ‡é–‹æºé …ç›®æˆ–å¯¦é©—å®¤ç’°å¢ƒ</div>
              <div><strong>4. æŒçºŒå­¸ç¿’ï¼š</strong>é—œæ³¨æ–°ç‰ˆæœ¬å’Œæ–°åŠŸèƒ½ç™¼ä½ˆ</div>
            </div>
          </div>
        </div>
      </div>

      <div className="mt-6 p-4 bg-gray-50 rounded-lg">
        <h4 className="font-semibold text-gray-800 mb-3">ğŸ’¡ å¹³å°é¸æ“‡æ±ºç­–æ¨¹</h4>
        <div className="text-sm text-gray-700">
          <div className="mb-2"><strong>å¦‚æœä½ æ˜¯...</strong></div>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
            <div>
              <div className="font-medium text-blue-600">â€¢ è³‡å®‰æ–°æ‰‹ â†’ Splunk SOAR</div>
              <div className="text-xs text-gray-600 ml-2">ç†ç”±ï¼šå­¸ç¿’è³‡æºè±å¯Œï¼Œç¤¾ç¾¤æ”¯æŒå¼·</div>
            </div>
            <div>
              <div className="font-medium text-red-600">â€¢ æœ‰é˜²ç«ç‰†ç¶“é©— â†’ Cortex XSOAR</div>
              <div className="text-xs text-gray-600 ml-2">ç†ç”±ï¼šPalo Altoç”Ÿæ…‹æ•´åˆå„ªå‹¢</div>
            </div>
            <div>
              <div className="font-medium text-green-600">â€¢ å¤§ä¼æ¥­èƒŒæ™¯ â†’ IBM QRadar SOAR</div>
              <div className="text-xs text-gray-600 ml-2">ç†ç”±ï¼šä¼æ¥­ç´šå®¢æˆ¶éœ€æ±‚ç©©å®š</div>
            </div>
            <div>
              <div className="font-medium text-purple-600">â€¢ è¿½æ±‚å‰µæ–° â†’ Swimlane/Torq</div>
              <div className="text-xs text-gray-600 ml-2">ç†ç”±ï¼šAIå¢å¼·åŠŸèƒ½ï¼Œå·®ç•°åŒ–ç«¶çˆ­</div>
            </div>
          </div>
        </div>
      </div>

      <div className="mt-4 text-sm text-gray-600 text-center">
        <p>æ•¸æ“šä¾†æº: Gartner Magic Quadrant SOAR 2025 + Indeed/LinkedIn Job Postings Analysis</p>
        <p className="mt-1 text-indigo-600 font-medium">
          ğŸ¯ å»ºè­°ï¼šå„ªå…ˆæŒæ¡å‰å…©å¤§å¹³å°ï¼Œæ¶µè“‹60%çš„å¸‚å ´æ©Ÿæœƒ
        </p>
      </div>
    </div>
  );
};

export default SOARMarketShareChart;
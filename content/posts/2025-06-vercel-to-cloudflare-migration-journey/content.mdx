å¾ä¸€å€‹æ¨¡ç³Šçš„æƒ³æ³•ï¼Œåˆ°ä¸€å€‹å¤šæœˆçš„ç¸å¯†è¦åŠƒï¼Œå†åˆ°å…©å¤©å¹¾ä¹ä¸çœ ä¸ä¼‘çš„å¯¦ä½œâ€”â€”æˆ‘çš„éƒ¨è½æ ¼é·ç§»ä¹‹æ—…çµ‚æ–¼ç•«ä¸‹å¥é»ã€‚é€™ä¸åƒ…æ˜¯å°‡ç¶²ç«™å¾ Vercel æ¬åˆ° Cloudflare çš„ç°¡å–®éç¨‹ï¼Œæ›´æ˜¯ä¸€å ´æ¶‰åŠ 60 å¤šç¯‡ MDX æ–‡ç« ï¼ˆç›¸ç•¶æ–¼ 60 å¤šå€‹å°å‹æ‡‰ç”¨ç¨‹å¼ï¼‰çš„æ·±åº¦æŠ€è¡“é‡æ§‹ã€‚å¦‚æœä½ ä¹Ÿæ­£åœ¨ç®¡ç†ä¸€å€‹å…§å®¹å¯†é›†çš„ MDX ç¶²ç«™ï¼Œæˆ–å°ç¾ä»£ Web é–‹ç™¼çš„çœŸå¯¦æŒ‘æˆ°æ„Ÿèˆˆè¶£ï¼Œé‚£éº¼é€™æ®µå……æ»¿é™·é˜±ã€å¤±æ•—èˆ‡æœ€çµ‚å‹åˆ©çš„ç¶“æ­·ï¼Œæˆ–è¨±èƒ½çµ¦ä½ ä¸€äº›å•Ÿç™¼ã€‚

## æŠ€è¡“èƒŒæ™¯ï¼šè¤‡é›œåº¦åˆ†æ

åœ¨æ·±å…¥é·ç§»éç¨‹ä¹‹å‰ï¼Œè®“æˆ‘å…ˆä»‹ç´¹é€™å€‹å°ˆæ¡ˆçš„æŠ€è¡“è¤‡é›œåº¦ã€‚é€™ä¸æ˜¯ä¸€å€‹ç°¡å–®çš„éœæ…‹ç¶²ç«™ï¼Œè€Œæ˜¯ä¸€å€‹é«˜åº¦å®¢è£½åŒ–çš„å…§å®¹å¹³å°ï¼š

### æŠ€è¡“æ¶æ§‹æ¦‚è¦½

- **Next.js 15** + App Router (æœ€æ–°ç‰¹æ€§)
- **MDX ç”Ÿæ…‹ç³»çµ±**ï¼š60+ ç¯‡æ–‡ç« ï¼Œæ¯ç¯‡éƒ½åŒ…å«å‹•æ…‹ React çµ„ä»¶
- **æ™ºæ…§çµ„ä»¶ç³»çµ±**ï¼šæ¯ç¯‡æ–‡ç« éƒ½æœ‰ç¨ç«‹çš„ `/components` ç›®éŒ„
- **TypeScript åš´æ ¼æ¨¡å¼**ï¼šå®Œæ•´çš„é¡å‹å®‰å…¨
- **Tailwind CSS 4**ï¼šåŒ…å«è‡ªå®šç¾©æ’ä»¶å’Œä¸»é¡Œ
- **Chart.js + React Flow**ï¼šè±å¯Œçš„äº’å‹•è¦–è¦ºåŒ–çµ„ä»¶

### æŒ‘æˆ°æŒ‡æ¨™

- **æª”æ¡ˆæ•¸é‡**ï¼š2000+ å€‹æª”æ¡ˆ
- **ä¾è³´åŒ…**ï¼š120+ npm å¥—ä»¶
- **çµ„ä»¶æ•¸é‡**ï¼š300+ å€‹ React çµ„ä»¶
- **æ§‹å»ºæ™‚é–“**ï¼šVercel ä¸Šéœ€è¦ 8-12 åˆ†é˜
- **éƒ¨ç½²å¤§å°**ï¼šå£“ç¸®å¾Œ 45MB+

## ç‚ºä»€éº¼è¦é›¢é–‹ Vercelï¼Ÿæ·±åº¦åˆ†æ

### æˆæœ¬çµæ§‹å•é¡Œ

Vercel çš„è¨ˆåƒ¹æ¨¡å¼å°æ–¼å…§å®¹è±å¯Œçš„ MDX éƒ¨è½æ ¼ä¾†èªªï¼Œå­˜åœ¨å¹¾å€‹éš±å«æˆæœ¬ï¼š

**Serverless Functions åŸ·è¡Œæˆæœ¬**
```javascript
// æ¯æ¬¡é é¢è«‹æ±‚çš„æˆæœ¬è¨ˆç®—
const costPerRequest = {
  functionInvocations: 0.0000002, // $0.20 per 1M invocations
  gbSecond: 0.0000166667,         // $0.00001667 per GB-second
  duration: 1.2,                  // MDX æ¸²æŸ“å¹³å‡ 1.2 ç§’
  memoryUsage: 1024               // 1GB è¨˜æ†¶é«”é…ç½®
};

// æœˆæµé‡ 10,000 é é¢ç€è¦½çš„ä¼°ç®—æˆæœ¬
const monthlyCost = (costPerRequest.functionInvocations * 10000) + 
                   (costPerRequest.gbSecond * 1.2 * 10000);
```

**é »å¯¬é™åˆ¶**
- Hobby æ–¹æ¡ˆï¼š100GB/æœˆ
- Pro æ–¹æ¡ˆï¼š1TB/æœˆ å¾Œé¡å¤–æ”¶è²»
- åœ–ç‰‡å’Œåª’é«”æª”æ¡ˆä½”ç”¨å¤§é‡é »å¯¬

**å»ºç½®æ™‚é–“é™åˆ¶**
- Hobbyï¼š10 åˆ†é˜å»ºç½®æ™‚é–“ä¸Šé™
- æˆ‘çš„å°ˆæ¡ˆç¶“å¸¸è¶…éé€™å€‹é™åˆ¶ï¼Œå°è‡´éƒ¨ç½²å¤±æ•—

### æ€§èƒ½ç“¶é ¸æ·±åº¦å‰–æ

**å†·å•Ÿå‹•å½±éŸ¿åˆ†æ**
```bash
# ä½¿ç”¨ WebPageTest æ¸¬è©¦çµæœ
Location: Taiwan
First Visit: 2.1s (å†·å•Ÿå‹•)
Repeat Visit: 0.8s (ç†±å•Ÿå‹•)
LCP: 1.6s
CLS: 0.02
```

**ä¼ºæœå™¨æ¸²æŸ“å»¶é²**
MDX çµ„ä»¶çš„ SSR è™•ç†å¢åŠ äº†é¡¯è‘—çš„éŸ¿æ‡‰æ™‚é–“ï¼Œç‰¹åˆ¥æ˜¯åŒ…å«è¤‡é›œåœ–è¡¨çš„æ–‡ç« ã€‚

### æ§åˆ¶æ¬Šé™åˆ¶

**å®¢è£½åŒ–å»ºç½®æµç¨‹**
- ç„¡æ³•è‡ªå®šç¾© Webpack é…ç½®çš„æŸäº›åº•å±¤è¨­å®š
- Edge Runtime é™åˆ¶äº†æŸäº› Node.js åŠŸèƒ½
- é›£ä»¥æ•´åˆç¬¬ä¸‰æ–¹å»ºç½®å·¥å…·

**ç›£æ§å’Œé™¤éŒ¯**
- æœ‰é™çš„æ—¥èªŒä¿ç•™æœŸ
- ç„¡æ³•æ·±åº¦åˆ†æå»ºç½®éç¨‹
- ä¾è³´ Vercel çš„éŒ¯èª¤å ±å‘Šç³»çµ±

## Cloudflare Pages çš„æŠ€è¡“å„ªå‹¢

### å…¨åŸŸç¶²è·¯æ¶æ§‹

**Anycast æŠ€è¡“å„ªå‹¢**
```bash
# æ•ˆèƒ½æ¸¬è©¦å°æ¯” (ping æ¸¬è©¦)
Target: Taiwan Taipei
Vercel: 45-60ms (ç¶“éç¾åœ‹è¥¿éƒ¨)
Cloudflare: 8-15ms (ç›´æ¥é€£æ¥å°åŒ—ç¯€é»)
```

**CDN åˆ†ä½ˆ**
- 330+ å…¨çƒæ•¸æ“šä¸­å¿ƒ
- å°ç£æœ‰å°åŒ—ã€é«˜é›„å…©å€‹ PoP
- äºå¤ªåœ°å€è¦†è“‹ç‡æ¥­ç•Œé ˜å…ˆ

### éœæ…‹è¨—ç®¡å„ªå‹¢

**çœŸæ­£çš„éœæ…‹éƒ¨ç½²**
```javascript
// Next.js Static Export é…ç½®
const nextConfig = {
  output: 'export',
  trailingSlash: true,
  images: {
    unoptimized: true
  }
};
```

æ¶ˆé™¤äº† Serverless Functions çš„æ‰€æœ‰å»¶é²å’Œæˆæœ¬å•é¡Œã€‚

## é·ç§»ä¹‹è·¯ï¼šå¾æ»¿æ‡·å¸Œæœ›åˆ°ç€•è‡¨æ”¾æ£„

### éšæ®µä¸€ï¼šåˆå§‹è¨­å®šèˆ‡é…ç½®

#### ç¬¬ä¸€æ­¥ï¼šç”¨ `create-cloudflare` åˆå§‹åŒ–å°ˆæ¡ˆ

æ—…ç¨‹çš„èµ·é»æ˜¯ Cloudflare å®˜æ–¹çš„ CLI å·¥å…·ã€‚ä½†åœ¨åŸ·è¡Œä¹‹å‰ï¼Œæˆ‘èŠ±äº†ç›¸ç•¶æ™‚é–“ç ”ç©¶æœ€ä½³çš„é…ç½®é¸é …ï¼š

```bash
# å…ˆæª¢æŸ¥å¯ç”¨çš„æ¨¡æ¿é¸é …
npm create cloudflare@latest --help

# æœ€çµ‚é¸æ“‡çš„æŒ‡ä»¤
npm create cloudflare@latest -- opennextjs-mdx-blog \
  --framework=next \
  --platform=pages \
  --no-git \
  --no-deploy
```

**é—œéµé…ç½®æ±ºç­–åˆ†æï¼š**

- **`--framework=next`**ï¼šç¢ºä¿ä½¿ç”¨ Next.js å°ˆç”¨æ¨¡æ¿ï¼ŒåŒ…å«å¿…è¦çš„ Cloudflare æ•´åˆ
- **`--platform=pages`**ï¼šé¸æ“‡ Pages è€Œé Workersï¼ŒåŸºæ–¼å¾Œé¢æœƒè©³è¿°çš„åŸå› 
- **`--no-git`**ï¼šä¿æŒç‰ˆæœ¬æ§åˆ¶çš„å®Œå…¨æ§åˆ¶æ¬Š
- **`--no-deploy`**ï¼šé¿å…æœªé…ç½®å®Œæ•´çš„æ—©æœŸéƒ¨ç½²å¤±æ•—

**CLI äº’å‹•éç¨‹è¨˜éŒ„ï¼š**
```bash
âœ… Create application
â ™ Retrieving list of available templates
â ¹ Cloning template https://github.com/cloudflare/next-on-pages
â ¸ Installing dependencies
â ¼ Setting up project
âœ… Application created successfully!

? Do you want to use git for version control? â€º No
? Do you want to deploy your application? â€º No

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  Your new Cloudflare application is ready!     â”‚
â”‚                                                 â”‚
â”‚  Next steps:                                    â”‚
â”‚  1. Change to the application directory         â”‚
â”‚  2. Install dependencies: npm install           â”‚
â”‚  3. Preview locally: npm run dev                â”‚
â”‚  4. Deploy: npm run deploy                      â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

#### ç¬¬äºŒæ­¥ï¼šæ·±åº¦é…ç½®åˆ†æ

ç”Ÿæˆçš„å°ˆæ¡ˆåŒ…å«äº†é—œéµçš„ Cloudflare æ•´åˆæª”æ¡ˆï¼š

**`wrangler.toml` é…ç½®è§£æ**
```toml
name = "opennextjs-mdx-blog"
compatibility_date = "2024-05-30"
compatibility_flags = ["nodejs_compat"]

[env.preview]
compatibility_date = "2024-05-30"

[env.production]
compatibility_date = "2024-05-30"

[[pages_build_env.vars]]
NODE_VERSION = "18"
```

**`next.config.js` Cloudflare å„ªåŒ–**
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  // Cloudflare Pages ç‰¹å®šé…ç½®
  output: 'export',
  trailingSlash: true,
  skipTrailingSlashRedirect: true,
  
  // åœ–ç‰‡å„ªåŒ–è¨­å®š
  images: {
    unoptimized: true,
    loader: 'custom',
    path: '',
  },
  
  // å¯¦é©—æ€§åŠŸèƒ½
  experimental: {
    runtime: 'experimental-edge',
  }
};

module.exports = nextConfig;
```

#### ç¬¬ä¸‰æ­¥ï¼šç‰ˆæœ¬æ§åˆ¶æ•´åˆç­–ç•¥

æˆ‘æ¡ç”¨äº†ä¸€å€‹æ›´ç‚ºè¬¹æ…çš„ Git è¨­å®šæµç¨‹ï¼š

```bash
# 1. åˆå§‹åŒ–æœ¬åœ°å€‰å„²
git init

# 2. è¨­å®šåŸºæœ¬é…ç½®
git config user.name "Your Name"
git config user.email "your.email@example.com"

# 3. å»ºç«‹ .gitignore æª¢æŸ¥
cat .gitignore | head -20

# 4. é€£æ¥é ç«¯å€‰å„²
git remote add origin https://github.com/ianTPE/opennextjs-mdx-blog.git

# 5. æª¢æŸ¥é ç«¯ç‹€æ…‹
git remote -v

# 6. è¨­å®šä¸»åˆ†æ”¯
git branch -M main

# 7. åˆ†éšæ®µæäº¤
git add package.json package-lock.json
git commit -m "Add package configuration"

git add next.config.js wrangler.toml
git commit -m "Add Cloudflare configuration"

git add .
git commit -m "Initial project structure from create-cloudflare"

# 8. æ¨é€åˆ°é ç«¯
git push -u origin main
```

é€™ç¨®åˆ†éšæ®µæäº¤çš„æ–¹å¼è®“æˆ‘èƒ½æ›´å¥½åœ°è¿½è¹¤æ¯å€‹é…ç½®æª”æ¡ˆçš„è®Šæ›´ã€‚

### éšæ®µäºŒï¼šéƒ¨ç½²å¹³å°æ±ºç­–ç½é›£

#### Workers çš„èª˜æƒ‘èˆ‡é™·é˜±

æœ€åˆï¼Œæˆ‘è¢« Cloudflare Workers çš„æŠ€è¡“æè¿°æ‰€æ·±æ·±å¸å¼•ï¼š

**Workers çš„ç†è«–å„ªå‹¢ï¼š**
- çœŸæ­£çš„ Edge Computingï¼Œå…¨çƒåˆ†ä½ˆå¼åŸ·è¡Œ
- V8 å¼•æ“ç›´æ¥åŸ·è¡Œï¼Œå•Ÿå‹•æ™‚é–“å°‘æ–¼1ms
- æ”¯æ´ WebAssemblyï¼Œæ€§èƒ½æ¥µé™æ›´é«˜
- å®Œæ•´çš„ JavaScript/TypeScript é‹è¡Œæ™‚

ç„¶è€Œï¼Œç¾å¯¦é æ¯”ç†è«–æ®˜é…·ã€‚

#### Workers éƒ¨ç½²å¤±æ•—æ·±åº¦åˆ†æ

**ç¬¬ä¸€æ¬¡å˜—è©¦ï¼šç›´æ¥éƒ¨ç½²**
```bash
# åˆå§‹éƒ¨ç½²æŒ‡ä»¤
npx wrangler pages project create opennextjs-mdx-blog
npx wrangler pages deploy .next/

# éŒ¯èª¤æ—¥èªŒ
Error: Could not resolve "./app/page.tsx"
Error: Dynamic imports are not supported in Workers
Error: Node.js APIs are not available in Workers runtime
```

**ç¬¬äºŒæ¬¡å˜—è©¦ï¼šä½¿ç”¨ @cloudflare/next-on-pages**
```bash
# å®‰è£å¿…è¦å¥—ä»¶
npm install --save-dev @cloudflare/next-on-pages

# ä¿®æ”¹ package.json
{
  "scripts": {
    "pages:build": "@cloudflare/next-on-pages",
    "pages:deploy": "wrangler pages deploy .vercel/output/static"
  }
}

# åŸ·è¡Œå»ºç½®
npm run pages:build
```

**å»ºç½®éç¨‹åˆ†æï¼ˆ20åˆ†é˜çš„ç—›è‹¦ï¼‰ï¼š**
```bash
[00:00] ğŸ” Analyzing Next.js application...
[00:45] ğŸ“¦ Bundling 127 pages...
[05:30] âš ï¸  Warning: Large bundle size detected
[10:15] ğŸ”§ Processing MDX components...
[15:40] âŒ Error: Memory limit exceeded
[20:00] ğŸ’¥ Build failed: Worker size limit exceeded
```

**é—œéµå¤±æ•—åŸå› ï¼š**

- **Worker å¤§å°é™åˆ¶**ï¼š10MB å£“ç¸®å¾Œé™åˆ¶ï¼Œæˆ‘çš„ MDX éƒ¨è½æ ¼è¶…é 45MB
- **è¨˜æ†¶é«”é™åˆ¶**ï¼š128MB é‹è¡Œæ™‚è¨˜æ†¶é«”ï¼ŒMDX æ¸²æŸ“éœ€è¦æ›´å¤š
- **Node.js ç›¸å®¹æ€§**ï¼šè¨±å¤š MDX ç›¸é—œå¥—ä»¶ä½¿ç”¨ Node.js APIs
- **å‹•æ…‹å°å…¥é™åˆ¶**ï¼šæˆ‘çš„æ™ºæ…§çµ„ä»¶ç³»çµ±å¤§é‡ä½¿ç”¨å‹•æ…‹å°å…¥

#### Pages çš„æ•‘è´–ä¹‹è·¯

**è½‰å‘ Pages çš„æ±ºå®š**
åœ¨ Workers å¤šæ¬¡å¤±æ•—å¾Œï¼Œæˆ‘å¹¾ä¹æƒ³è¦æ”¾æ£„æ•´å€‹é·ç§»è¨ˆåŠƒã€‚ä½†æ˜¯ä¸€ç¯‡ Reddit è¨è«–æ”¹è®Šäº†æˆ‘çš„æƒ³æ³•ï¼š

> "For content-heavy sites with complex builds, Pages is often the better choice. Workers are great for lightweight APIs, but Pages excels at static hosting with edge optimization."

**Pages éƒ¨ç½²æˆåŠŸè¨˜éŒ„ï¼š**
```bash
# ç¬¬ä¸€æ¬¡ Pages éƒ¨ç½²
npx wrangler pages project create opennextjs-mdx-blog --type=upload

# ä¿®æ”¹ next.config.js ç‚ºéœæ…‹å°å‡º
const nextConfig = {
  output: 'export',
  trailingSlash: true,
  images: { unoptimized: true }
};

# å»ºç½®å’Œéƒ¨ç½²
npm run build
npx wrangler pages deploy out/

# çµæœ
âœ… Success! Deployed to https://opennextjs-mdx-blog.pages.dev
ğŸ“Š Build time: 3m 42s
ğŸ“¦ Deploy size: 42.3 MB
ğŸŒ Global distribution: Active
```

**Pages vs Workers å°æ¯”åˆ†æï¼š**

| ç‰¹æ€§ | Workers | Pages |
|------|---------|-------|
| å¤§å°é™åˆ¶ | 10MB å£“ç¸® | 500MB æœªå£“ç¸® |
| å»ºç½®æ™‚é–“ | 15-25 åˆ†é˜ | 3-5 åˆ†é˜ |
| Node.js æ”¯æ´ | æœ‰é™ | å®Œæ•´ |
| éœæ…‹è³‡æº | è¤‡é›œ | åŸç”Ÿæ”¯æ´ |
| é™¤éŒ¯é›£åº¦ | é«˜ | ä½ |
| é©ç”¨å ´æ™¯ | è¼•é‡ API | å…§å®¹è±å¯Œç¶²ç«™ |

**æŠ€è¡“æ±ºç­–ç¸½çµï¼š**
å°æ–¼ MDX éƒ¨è½æ ¼é€™é¡å…§å®¹å¯†é›†å‹æ‡‰ç”¨ï¼Œ**Cloudflare Pages æ˜¯å”¯ä¸€å¯è¡Œçš„é¸æ“‡**ã€‚Workers é›–ç„¶æŠ€è¡“ä¸Šæ›´å…ˆé€²ï¼Œä½†é™åˆ¶å¤ªå¤šï¼Œä¸é©åˆè¤‡é›œçš„éœæ…‹ç¶²ç«™ç”Ÿæˆã€‚

### éšæ®µä¸‰ï¼šå…§å®¹é·ç§»èˆ‡ AI å”åŒä½œæˆ°

#### å¤§è¦æ¨¡å…§å®¹é·ç§»ç­–ç•¥

ç¶²ç«™åŸºç¤æ¶æ§‹å°±ç·’å¾Œï¼Œæœ€è‰±é›£çš„ä»»å‹™ä¾†äº†ï¼šå°‡ 60+ ç¯‡ MDX æ–‡ç« å¾èˆŠç³»çµ±é·ç§»åˆ°æ–°æ¶æ§‹ã€‚é€™ä¸æ˜¯ç°¡å–®çš„è¤‡è£½è²¼ä¸Šï¼Œè€Œæ˜¯ä¸€æ¬¡æ·±åº¦çš„çµæ§‹é‡çµ„ã€‚

**é·ç§»è¤‡é›œåº¦åˆ†æï¼š**
- **æ–‡ç« çµæ§‹è®Šæ›´**ï¼šå¾å–®æª”æ¡ˆ MDX æ”¹ç‚º `content.mdx` + `metadata.ts` çµæ§‹
- **çµ„ä»¶è·¯å¾‘é‡æ§‹**ï¼šæ‰€æœ‰çµ„ä»¶éœ€è¦ç§»å‹•åˆ° `/components` ç›®éŒ„
- **åœ–ç‰‡è·¯å¾‘æ›´æ–°**ï¼šCloudflare Pages çš„éœæ…‹è³‡æºè·¯å¾‘ä¸åŒ
- **å…ƒæ•¸æ“šé‡æ§‹**ï¼šå¾ frontmatter æ”¹ç‚º TypeScript æ¨¡çµ„

#### AI å”åŒå·¥ä½œæµç¨‹

æˆ‘è¨­è¨ˆäº†ä¸€å€‹ç³»çµ±åŒ–çš„ AI å”ä½œæµç¨‹ï¼š

**ç¬¬ä¸€éšæ®µï¼šæ‰¹é‡çµæ§‹è½‰æ›**
```bash
# ä½¿ç”¨ Claude Code å‰µå»ºè½‰æ›è…³æœ¬
# è¼¸å…¥ï¼šèˆŠçš„å–®æª”æ¡ˆ MDX
# è¼¸å‡ºï¼šæ–°çš„çµæ§‹åŒ–ç›®éŒ„

For each article:
  1. Extract frontmatter â†’ metadata.ts
  2. Extract content â†’ content.mdx  
  3. Identify components â†’ /components/
  4. Update image paths
  5. Validate TypeScript types
```

**å¯¦éš›è½‰æ›ç¯„ä¾‹ï¼š**

èˆŠçµæ§‹ï¼ˆå–®æª”æ¡ˆï¼‰ï¼š
```markdown
---
title: "Next.js MDX Blog Setup"
date: "2024-05-15"
tags: ["nextjs", "mdx", "blog"]
---

# Next.js MDX Blog Setup

Content here...

<CustomChart data={[1,2,3]} />
```

æ–°çµæ§‹ï¼ˆå¤šæª”æ¡ˆï¼‰ï¼š
```typescript
// metadata.ts
export const metadata = {
  title: "Next.js MDX Blog Setup",
  publishedAt: "2024-05-15",
  tags: ["nextjs", "mdx", "blog"],
  readingTime: 8
} satisfies PostMeta;
```

```markdown
<!-- content.mdx -->
# Next.js MDX Blog Setup

Content here...

<CustomChart data={[1,2,3]} />
```

**ç¬¬äºŒéšæ®µï¼šçµ„ä»¶æå–èˆ‡å„ªåŒ–**

AI å¹«åŠ©æˆ‘åˆ†ææ¯ç¯‡æ–‡ç« ä¸­çš„è‡ªå®šç¾©çµ„ä»¶ï¼Œä¸¦é€²è¡Œä»¥ä¸‹è™•ç†ï¼š

- **çµ„ä»¶è­˜åˆ¥**ï¼šæƒæ MDX ä¸­çš„ JSX çµ„ä»¶
- **ä¾è³´åˆ†æ**ï¼šæª¢æŸ¥çµ„ä»¶çš„å¤–éƒ¨ä¾è³´
- **ç¨‹å¼ç¢¼ç”Ÿæˆ**ï¼šå‰µå»ºå°æ‡‰çš„ React çµ„ä»¶æª”æ¡ˆ
- **ç´¢å¼•æ›´æ–°**ï¼šæ›´æ–° `components/index.ts`

#### è‡´å‘½ Bugï¼šLoading.tsx ç½é›£

**äº‹ä»¶æ™‚é–“ç·šï¼š**
- **Day 1 16:30** - Augment åŸ·è¡Œå¤§æ‰¹é‡çµ„ä»¶é‡æ§‹
- **Day 1 17:15** - ç¶²ç«™çªç„¶å®Œå…¨ç„¡æ³•è¼‰å…¥
- **Day 1 17:16-21:30** - 4å°æ™‚15åˆ†é˜çš„é™¤éŒ¯å™©å¤¢

**ç—‡ç‹€åˆ†æï¼š**
```bash
# ç€è¦½å™¨è¡Œç‚º
- é é¢é¡¯ç¤ºç©ºç™½
- è¼‰å…¥æŒ‡ç¤ºå™¨æ°¸é æ—‹è½‰
- Network tab é¡¯ç¤ºè«‹æ±‚æ­£å¸¸
- Console å®Œå…¨æ²’æœ‰éŒ¯èª¤

# æœ¬åœ°é–‹ç™¼ä¼ºæœå™¨
npm run dev
> Local: http://localhost:3000
> Network: ready in 2.3s
# ä½†ç€è¦½å™¨è¨ªå•ä»ç„¶ç©ºç™½

# å»ºç½®éç¨‹
npm run build
> âœ“ Compiled successfully
> âœ“ Collecting page data
> âœ“ Generating static pages (127/127)
# å»ºç½®æˆåŠŸï¼Œä½†åŸ·è¡Œå¤±æ•—
```

**é™¤éŒ¯éç¨‹è¨˜éŒ„ï¼š**

**éšæ®µä¸€ï¼šæª¢æŸ¥å¸¸è¦‹å•é¡Œ**ï¼ˆ30åˆ†é˜ï¼‰
   - JavaScript èªæ³•éŒ¯èª¤ âŒ
   - CSS æ¨£å¼è¡çª âŒ
   - ç’°å¢ƒè®Šæ•¸å•é¡Œ âŒ

**éšæ®µäºŒï¼šçµ„ä»¶æ¨¹åˆ†æ**ï¼ˆ45åˆ†é˜ï¼‰
   - é€ä¸€æª¢æŸ¥æ–°å¢çš„çµ„ä»¶
   - æ¸¬è©¦çµ„ä»¶å–®ç¨æ¸²æŸ“
   - æª¢æŸ¥ import/export èªæ³•

**éšæ®µä¸‰ï¼šNext.js ç‰¹æ€§æ’æŸ¥**ï¼ˆ90åˆ†é˜ï¼‰
   - App Router é…ç½®
   - éœæ…‹ç”Ÿæˆè¨­å®š
   - ä¸­ä»‹è»Ÿé«”æª¢æŸ¥

**éšæ®µå››ï¼šèˆ‡ Claude Code å”ä½œé™¤éŒ¯**ï¼ˆ120åˆ†é˜ï¼‰

æœ€çµ‚ï¼Œé€éç³»çµ±æ€§çš„æª”æ¡ˆæ¯”è¼ƒï¼ŒClaude Code ç™¼ç¾äº†å•é¡Œï¼š

**å•é¡Œæ ¹æºï¼š**
```tsx
// app/loading.tsx - è¢« Augment ç ´å£çš„ç‰ˆæœ¬
export default function Loading() {
  // Augment åœ¨é‡æ§‹æ™‚æ„å¤–æ·»åŠ äº†ä¸€å€‹ç„¡é™è¿´åœˆ
  const [isLoading, setIsLoading] = useState(true);
  
  useEffect(() => {
    // é€™å€‹ effect æ²’æœ‰ä¾è³´é …ï¼Œå°è‡´ç„¡é™é‡æ¸²æŸ“
    setIsLoading(true);
  }); // ç¼ºå°‘ä¾è³´æ•¸çµ„ï¼
  
  return isLoading ? <div>Loading...</div> : null;
}
```

**ä¿®å¾©æ–¹æ¡ˆï¼š**
```tsx
// app/loading.tsx - ä¿®å¾©ç‰ˆæœ¬
export default function Loading() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
      <span className="ml-2 text-muted-foreground">Loading...</span>
    </div>
  );
}
```

**æŠ€è¡“åˆ†æï¼š**
é€™å€‹ bug çš„å±éšªæ€§åœ¨æ–¼å®ƒç ´å£äº† Next.js App Router çš„ Suspense é‚Šç•Œã€‚ç•¶é é¢é€²å…¥ loading ç‹€æ…‹æ™‚ï¼Œ`Loading` çµ„ä»¶çš„ç„¡é™é‡æ¸²æŸ“å°è‡´ React ç„¡æ³•å®Œæˆæ¸²æŸ“é€±æœŸï¼Œæ•´å€‹æ‡‰ç”¨è¢«ã€Œå‡çµã€åœ¨ loading ç‹€æ…‹ã€‚

#### AI å”ä½œçš„ç¶“é©—æ•™è¨“

**AI çš„å„ªå‹¢ï¼š**
- å¿«é€Ÿæ‰¹é‡è™•ç†é‡è¤‡æ€§ä»»å‹™
- æ¨¡å¼è­˜åˆ¥å’Œä»£ç¢¼ç”Ÿæˆæ•ˆç‡æ¥µé«˜
- èƒ½å¤ è™•ç†è¤‡é›œçš„é‡æ§‹é‚è¼¯

**AI çš„å±€é™æ€§ï¼š**
- å° React Hooks è¦å‰‡çš„ç†è§£ä¸å¤ æ·±å…¥
- ç¼ºä¹å°æ‡‰ç”¨ç¨‹å¼æ•´é«”ç‹€æ…‹çš„æ„ŸçŸ¥
- é›£ä»¥é æ¸¬å‰¯ä½œç”¨å’Œé‚Šç•Œæƒ…æ³

**å”ä½œæœ€ä½³å¯¦è¸ï¼š**
- **åˆ†æ‰¹è™•ç†**ï¼šé¿å…ä¸€æ¬¡æ€§å¤§è¦æ¨¡è®Šæ›´
- **å³æ™‚æ¸¬è©¦**ï¼šæ¯å€‹æ‰¹æ¬¡å¾Œç«‹å³é©—è­‰åŠŸèƒ½
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šç´°ç²’åº¦çš„ commit ä¾¿æ–¼å•é¡Œå®šä½
- **äººå·¥å¯©æŸ¥**ï¼šé—œéµæª”æ¡ˆè®Šæ›´éœ€è¦äººå·¥æª¢æŸ¥

### éšæ®µå››ï¼šæ€§èƒ½å„ªåŒ–èˆ‡æœ€çµ‚èª¿æ•´

#### æ•ˆèƒ½ç›£æ§èˆ‡åˆ†æ

é·ç§»å®Œæˆå¾Œï¼Œæˆ‘é€²è¡Œäº†å…¨é¢çš„æ•ˆèƒ½æ¸¬è©¦ï¼Œçµæœè®“äººé©šå–œï¼š

**è¼‰å…¥é€Ÿåº¦å°æ¯”ï¼š**
```bash
# Lighthouse æ¸¬è©¦çµæœ (å°ç£æ¸¬è©¦ç¯€é»)
                 Vercel    Cloudflare Pages
Performance        78           96
Accessibility      92           92  
Best Practices     83           91
SEO               89           94
LCP              1.6s         0.8s
FID              12ms          8ms
CLS              0.02         0.01
```

**å…¨çƒæ•ˆèƒ½æ¸¬è©¦ï¼š**
```bash
# WebPageTest å¤šåœ°é»æ¸¬è©¦
Location        Vercel    Cloudflare
å°åŒ— (Taipei)    1.2s        0.7s
æ±äº¬ (Tokyo)     0.9s        0.6s
æ–°åŠ å¡ (SG)      1.1s        0.5s
é›ªæ¢¨ (Sydney)    1.4s        0.8s
å€«æ•¦ (London)    2.1s        1.2s
ç´ç´„ (NYC)       1.8s        1.1s
```

#### æ„å¤–ç™¼ç¾çš„å„ªåŒ–æ©Ÿæœƒ

**åœ–ç‰‡è¼‰å…¥å„ªåŒ–**
å¾ Vercel é·ç§»åˆ° Cloudflare å¾Œï¼Œæˆ‘ç™¼ç¾äº†ä¸€å€‹æ„å¤–çš„æ•ˆèƒ½ç“¶é ¸ï¼š

```javascript
// å•é¡Œï¼šNext.js Image çµ„ä»¶åœ¨éœæ…‹å°å‡ºä¸­å¤±æ•ˆ
<Image 
  src="/images/chart.png" 
  alt="Performance Chart"
  width={800} 
  height={400}
  priority
/>

// è§£æ±ºæ–¹æ¡ˆï¼šå®¢è£½åŒ–åœ–ç‰‡çµ„ä»¶
const OptimizedImage = ({ src, alt, ...props }) => {
  return (
    <img 
      src={src}
      alt={alt}
      loading="lazy"
      decoding="async"
      {...props}
      style={{
        maxWidth: '100%',
        height: 'auto',
        aspectRatio: 'auto'
      }}
    />
  );
};
```

**Bundle å¤§å°å„ªåŒ–**
```bash
# åˆ†æå·¥å…·
npm install --save-dev @next/bundle-analyzer

# package.json
{
  "scripts": {
    "analyze": "ANALYZE=true npm run build"
  }
}

# å„ªåŒ–çµæœ
Original bundle: 2.3MB
Optimized bundle: 1.8MB (-22%)
Main performance gains:
- Tree-shake Chart.js: -300KB
- Remove unused Tailwind: -150KB  
- Optimize MDX runtime: -200KB
```

## æ·±åº¦æŠ€è¡“åæ€èˆ‡æ”¶ç©«

### æ¶æ§‹è¨­è¨ˆå“²å­¸çš„è½‰è®Š

é€™æ¬¡é·ç§»ä¸åƒ…æ˜¯æŠ€è¡“æ£§çš„æ”¹è®Šï¼Œæ›´æ˜¯æ¶æ§‹æ€ç¶­çš„æ·±åº¦è½‰è®Šï¼š

#### å¾å‹•æ…‹åˆ°éœæ…‹çš„æ€ç¶­è½‰æ›

**Vercel æ™‚æœŸçš„æ€ç¶­ï¼š**
- ä¾è³´ Serverless Functions è™•ç†å‹•æ…‹éœ€æ±‚
- å³æ™‚æ¸²æŸ“ MDX å…§å®¹
- ä¼ºæœå™¨ç«¯è³‡æ–™ç²å–

**Cloudflare Pages çš„æ–°æ€ç¶­ï¼š**
- å»ºç½®æ™‚é–“é æ¸²æŸ“æ‰€æœ‰å…§å®¹
- å®Œå…¨éœæ…‹åŒ–çš„è³‡ç”¢åˆ†ç™¼
- é‚Šç·£å¿«å–æœ€å¤§åŒ–åˆ©ç”¨

```javascript
// æ€ç¶­è½‰æ›ç¯„ä¾‹ï¼šæœå°‹åŠŸèƒ½å¯¦ç¾
// èˆŠæ–¹æ¡ˆï¼ˆå‹•æ…‹ï¼‰
export async function GET(request) {
  const query = request.url.searchParams.get('q');
  const results = await searchPosts(query);
  return Response.json(results);
}

// æ–°æ–¹æ¡ˆï¼ˆéœæ…‹ï¼‰
// å»ºç½®æ™‚ç”Ÿæˆæœå°‹ç´¢å¼•
const searchIndex = generateSearchIndex(allPosts);
// å®¢æˆ¶ç«¯ JavaScript æœå°‹
function searchPosts(query) {
  return fuse.search(query, searchIndex);
}
```

#### æˆæœ¬æ„è­˜çš„é¤Šæˆ

é€™æ¬¡é·ç§»è®“æˆ‘æ·±åˆ»ç†è§£äº†ã€ŒæŠ€è¡“è² å‚µã€çš„çœŸå¯¦æˆæœ¬ï¼š

**å¯è¦‹æˆæœ¬ vs éš±è—æˆæœ¬ï¼š**
- **Vercel å¯è¦‹æˆæœ¬**ï¼šæ¯æœˆ $20 Pro æ–¹æ¡ˆ
- **Vercel éš±è—æˆæœ¬**ï¼š
  - è¶…æ™‚å»ºç½®çš„é‡è©¦æˆæœ¬
  - åŠŸèƒ½é™åˆ¶å°è‡´çš„é–‹ç™¼æ™‚é–“æˆæœ¬
  - æ“´å±•æ€§é™åˆ¶çš„æ©Ÿæœƒæˆæœ¬

- **Cloudflare ç¸½æˆæœ¬**ï¼š$0ï¼ˆçœŸæ­£çš„å…è²»ï¼‰
- **å­¸ç¿’æˆæœ¬**ï¼š2 å¤©æ·±åº¦å­¸ç¿’ + è¨­å®š

### æŠ€è¡“å‚µå‹™çš„æ¸…ç†æ”¶ç©«

#### å¼·åˆ¶æ€§é‡æ§‹å¸¶ä¾†çš„ç¨‹å¼ç¢¼å“è³ªæå‡

é·ç§»éç¨‹å¼·åˆ¶æˆ‘é‡æ–°å¯©è¦–æ¯ä¸€è¡Œç¨‹å¼ç¢¼ï¼š

**ä¾è³´æ¸…ç†ï¼š**
```bash
# é·ç§»å‰ï¼š120+ ä¾è³´åŒ…
# é·ç§»å¾Œï¼š85 å€‹æ ¸å¿ƒä¾è³´ï¼ˆ-29%ï¼‰

# ç§»é™¤çš„å†—é¤˜ä¾è³´
- @vercel/analytics (æ›¿æ›ç‚º Cloudflare Web Analytics)
- next-seo (é‡æ§‹ç‚ºè‡ªè¨‚ metadata)
- å¤šå€‹é‡è¤‡çš„ UI å…ƒä»¶åº«
```

**å‹åˆ¥å®‰å…¨æå‡ï¼š**
```typescript
// èˆŠçš„é¬†æ•£å‹åˆ¥å®šç¾©
interface Post {
  title: string;
  date: string;
  content?: string;
}

// æ–°çš„åš´æ ¼å‹åˆ¥å®šç¾©
interface PostMeta {
  readonly title: string;
  readonly publishedAt: string;
  readonly updatedAt?: string;
  readonly tags: readonly string[];
  readonly readingTime: number;
  readonly featured: boolean;
}
```

#### å·¥ç¨‹åŒ–æµç¨‹çš„å»ºç«‹

**è‡ªå‹•åŒ–æ¸¬è©¦æµç¨‹ï¼š**
```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Lint code
        run: npm run lint
      
      - name: Type check
        run: npm run type-check
      
      - name: Build site
        run: npm run build
      
      - name: Deploy to Cloudflare
        uses: cloudflare/pages-action@v1
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: opennextjs-mdx-blog
          directory: out
```

### é‡è¦ç¶“é©—æ•™è¨“

#### å·¥å…·é¸æ“‡çš„æˆ°ç•¥é‡è¦æ€§

**æ ¸å¿ƒåŸå‰‡ï¼šé©åˆæ¯”å…ˆé€²æ›´é‡è¦**
- Workers é›–ç„¶æŠ€è¡“ä¸Šæ›´å…ˆé€²ï¼Œä½† Pages æ›´é©åˆå…§å®¹å‹ç¶²ç«™
- æ–°æŠ€è¡“çš„å­¸ç¿’æˆæœ¬éœ€è¦ç´å…¥æ±ºç­–è€ƒé‡
- ç”Ÿæ…‹ç³»çµ±çš„æˆç†Ÿåº¦æ¯”å–®ä¸€åŠŸèƒ½çš„å¼·å¤§æ›´é‡è¦

#### AI å”ä½œçš„é‚Šç•Œèˆ‡æœ€ä½³å¯¦è¸

**æœ‰æ•ˆå”ä½œæ¨¡å¼ï¼š**
- **AI è² è²¬**ï¼šé‡è¤‡æ€§ä»»å‹™ã€æ¨¡å¼è­˜åˆ¥ã€ä»£ç¢¼ç”Ÿæˆ
- **äººé¡è² è²¬**ï¼šæ¶æ§‹æ±ºç­–ã€å“è³ªæ§åˆ¶ã€å•é¡Œå®šä½
- **å”åŒè² è²¬**ï¼šè¤‡é›œé‡æ§‹ã€æ•ˆèƒ½å„ªåŒ–ã€æ•…éšœæ’é™¤

**é¢¨éšªæ§åˆ¶ç­–ç•¥ï¼š**
- å°æ‰¹æ¬¡è®Šæ›´ï¼Œæ¯æ¬¡é©—è­‰
- é—œéµæª”æ¡ˆäººå·¥ review
- è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹æ ¸å¿ƒåŠŸèƒ½
- Git ç´°ç²’åº¦æäº¤ä¾¿æ–¼å›æ»¾

#### é·ç§»é …ç›®çš„é …ç›®ç®¡ç†

**æ™‚é–“ä¼°ç®—æ•™è¨“ï¼š**
- **é æœŸæ™‚é–“**ï¼š1 é€±
- **å¯¦éš›æ™‚é–“**ï¼š3 é€±
- **ä¸»è¦å»¶èª¤åŸå› **ï¼š
  - ä½ä¼°äº†å…§å®¹é·ç§»çš„è¤‡é›œåº¦ï¼ˆ40%ï¼‰
  - æœªé æœŸ Workers é…ç½®å¤±æ•—ï¼ˆ30%ï¼‰
  - é™¤éŒ¯æ™‚é–“è¶…å‡ºé æœŸï¼ˆ30%ï¼‰

**æ”¹é€²å»ºè­°ï¼š**
- ç‚ºè¤‡é›œåº¦é ç•™ 2-3 å€çš„æ™‚é–“ç·©è¡
- åˆ†éšæ®µé©—è­‰ï¼Œé¿å…å¤§çˆ†ç‚¸å¼éƒ¨ç½²
- æº–å‚™ B è¨ˆåŠƒï¼ˆPages ä½œç‚º Workers çš„å‚™æ¡ˆï¼‰

### æˆæœèˆ‡å½±éŸ¿

#### é‡åŒ–æ”¶ç›Š

**æ•ˆèƒ½æå‡ï¼š**
- å¹³å‡è¼‰å…¥é€Ÿåº¦æå‡ 40%
- Lighthouse åˆ†æ•¸å¾ 78 æå‡åˆ° 96
- å…¨çƒç”¨æˆ¶é«”é©—æ˜é¡¯æ”¹å–„

**ç¶­è­·æˆæœ¬é™ä½ï¼š**
- æ¯æœˆè¨—ç®¡è²»ç”¨ï¼š$20 â†’ $0
- å»ºç½®æ™‚é–“ï¼š8-12åˆ†é˜ â†’ 3-4åˆ†é˜
- éƒ¨ç½²å¤±æ•—ç‡ï¼š15% â†’ å°‘æ–¼1%

**é–‹ç™¼é«”é©—æ”¹å–„ï¼š**
- æœ¬åœ°é–‹ç™¼ç’°å¢ƒæ›´æ¥è¿‘ç”Ÿç”¢ç’°å¢ƒ
- é™¤éŒ¯å·¥å…·æ›´è±å¯Œ
- è‡ªå‹•åŒ–æµç¨‹æ›´å¯é 

#### æŠ€èƒ½æˆé•·

**æŠ€è¡“æŠ€èƒ½ï¼š**
- æ·±åº¦ç†è§£éœæ…‹ç¶²ç«™ç”ŸæˆåŸç†
- æŒæ¡ Cloudflare ç”Ÿæ…‹ç³»çµ±
- æå‡ MDX æ¶æ§‹è¨­è¨ˆèƒ½åŠ›

**å·¥ç¨‹æŠ€èƒ½ï¼š**
- å¤§å‹é …ç›®é·ç§»çš„é …ç›®ç®¡ç†
- AI å”ä½œçš„æµç¨‹è¨­è¨ˆ
- é¢¨éšªè©•ä¼°èˆ‡æ‡‰æ€¥é æ¡ˆåˆ¶å®š

å¸Œæœ›é€™æ®µè©³ç´°çš„é·ç§»ç¶“æ­·ï¼Œèƒ½ç‚ºåŒæ¨£åœ¨é€²è¡ŒæŠ€è¡“æ£§é·ç§»æˆ–è€ƒæ…®å¾ Vercel è½‰å‘ Cloudflare çš„é–‹ç™¼è€…æä¾›å¯¦ç”¨çš„åƒè€ƒã€‚æŠ€è¡“é¸æ“‡å¾ä¾†ä¸æ˜¯éé»‘å³ç™½çš„ï¼Œé—œéµåœ¨æ–¼æ‰¾åˆ°æœ€é©åˆè‡ªå·±é …ç›®ç‰¹æ€§å’Œç™¼å±•éšæ®µçš„è§£æ±ºæ–¹æ¡ˆã€‚


---

## ğŸ“š ç›¸é—œè³‡æº

### å®˜æ–¹æ–‡æª”

- [Cloudflare Pages](https://developers.cloudflare.com/pages/)
- [Next.js Static Export](https://nextjs.org/docs/app/building-your-application/deploying/static-exports)
- [@opennextjs/cloudflare](https://github.com/opennextjs/opennextjs-cloudflare)

### å¯¦ç”¨å·¥å…·

- [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/)
- [WebPageTest](https://www.webpagetest.org/)
- [Lighthouse CI](https://github.com/GoogleChrome/lighthouse-ci)

---

_æ„Ÿè¬ **Augment Code** å’Œ **Claude** åœ¨éƒ¨è½æ ¼å»ºè¨­éç¨‹ä¸­çš„å”ä½œæ”¯æŒï¼_ ğŸ¤–âœ¨
